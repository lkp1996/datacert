<h1 class="jumbotron-heading">Raport d'audit</h1>

<uib-tabset active="active">
    <uib-tab index="0" heading="{{tabs[0].name}}" disable="tabs[0].disabled">
        <label>Date(s) de l’audit</label>
        <div class="form-row" ng-repeat="auditDate in generalInfos.auditDates">
            <div class="col-md-1 mb-3">
                <a ng-click="delRow(generalInfos.auditDates, $index)"
                   ng-if="modified && generalInfos.auditDates.length > 1">
                    <ng-md-icon icon="remove" style="fill: #c60000"></ng-md-icon>
                </a>
            </div>
            <div class="col-md-11 mb-3">
                <input type="date" class="form-control"
                       placeholder="Date(s) de l’audit"
                       ng-model="auditDate.auditDate"
                       ng-if="modified">
                <input type="date" class="form-control"
                       placeholder="Date(s) de l’audit"
                       ng-model="auditDate.auditDate"
                       ng-if="!modified" disabled>
            </div>

        </div>
        <div class="form-row">
            <div class="col-md-1 mb-3">
                <a ng-click="addAuditDateRow()"
                   ng-if="modified">
                    <ng-md-icon icon="add" style="fill: #2f6ac6"></ng-md-icon>
                </a>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Principaux changements au sein de l'organisation depuis le dernier audit</label>
                <input type="text" class="form-control"
                       placeholder="Principaux changements au sein de l'organisation depuis le dernier audit"
                       ng-model="generalInfos.organizationChangesSinceLastAudit"
                       ng-if="modified">
                <input type="text" class="form-control"
                       placeholder="Principaux changements au sein de l'organisation depuis le dernier audit"
                       ng-model="generalInfos.organizationChangesSinceLastAudit"
                       ng-if="!modified" disabled>
            </div>

        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Préparation de l’audit</label>
                <input type="text" class="form-control"
                       placeholder="Préparation de l’audit"
                       ng-model="generalInfos.auditPreparation"
                       ng-if="modified">
                <input type="text" class="form-control"
                       placeholder="Préparation de l’audit"
                       ng-model="generalInfos.auditPreparation"
                       ng-if="!modified" disabled>
            </div>

        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Méthode d’audit</label>
                <input type="text" class="form-control"
                       placeholder="Méthode d’audit"
                       ng-model="generalInfos.auditMethod"
                       ng-if="modified">
                <input type="text" class="form-control"
                       placeholder="Méthode d’audit"
                       ng-model="generalInfos.auditMethod"
                       ng-if="!modified" disabled>
            </div>

        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Norme(s) et version</label>
                <input type="text" class="form-control"
                       placeholder="Norme(s) et version"
                       ng-model="generalInfos.standards"
                       ng-if="modified">
                <input type="text" class="form-control"
                       placeholder="Norme(s) et version"
                       ng-model="generalInfos.standards"
                       ng-if="!modified" disabled>
            </div>

        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Autres normes certifiées</label>
                <input type="text" class="form-control" placeholder="Autres normes certifiées"
                       ng-model="generalInfos.otherStandards"
                       ng-if="modified">
                <input type="text" class="form-control" placeholder="Autres normes certifiées"
                       ng-model="generalInfos.otherStandards"
                       ng-if="!modified" disabled>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Type d'audit</label>
                <select class="form-control" ng-if="modified">
                    <option ng-repeat="auditType in generalInfos.auditTypes">{{auditType.type}}</option>
                </select>
                <select class="form-control" ng-if="!modified" disabled>
                    <option ng-repeat="auditType in generalInfos.auditTypes">{{auditType.type}}</option>
                </select>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Organisme certificateur</label>
                <input type="text" class="form-control"
                       placeholder="Organisme certificateur"
                       ng-model="generalInfos.certificationBody" ng-if="modified">
                <input type="text" class="form-control"
                       placeholder="Organisme certificateur"
                       ng-model="generalInfos.certificationBody" ng-if="!modified"
                       disabled>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Type d'audit de l'audit précédent</label>
                <select class="form-control" ng-if="modified">
                    <option ng-repeat="lastAuditType in generalInfos.lastAuditTypes">{{lastAuditType.type}}</option>
                </select>
                <select class="form-control" ng-if="!modified" disabled>
                    <option ng-repeat="lastAuditType in generalInfos.lastAuditTypes">{{lastAuditType.type}}</option>
                </select>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Principaux changements au sein du système de management depuis le dernier audit</label>
                <input type="text" class="form-control"
                       placeholder="Principaux changements au sein du système de management depuis le dernier audit"
                       ng-model="generalInfos.managementSystemChangesSinceLastAudit"
                       ng-if="modified">
                <input type="text" class="form-control"
                       placeholder="Principaux changements au sein du système de management depuis le dernier audit"
                       ng-model="generalInfos.managementSystemChangesSinceLastAudit"
                       ng-if="!modified" disabled>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Documents de référence</label>
                <input type="text" class="form-control" placeholder="Documents de référence"
                       ng-model="generalInfos.referenceDoc"
                       ng-if="modified">
                <input type="text" class="form-control" placeholder="Documents de référence"
                       ng-model="generalInfos.referenceDoc"
                       ng-if="!modified" disabled>
            </div>

        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Fréquence d'audit</label>
                <input type="text" class="form-control" placeholder="Fréquence d'audit"
                       ng-model="generalInfos.auditFrequency"
                       ng-if="modified">
                <input type="text" class="form-control" placeholder="Fréquence d'audit"
                       ng-model="generalInfos.auditFrequency"
                       ng-if="!modified" disabled>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Nombre de jours d'audit</label>
                <input type="number" class="form-control" placeholder="Nombre de jours d'audit"
                       ng-model="generalInfos.numberAuditDays"
                       ng-if="modified">
                <input type="number" class="form-control" placeholder="Nombre de jours d'audit"
                       ng-model="generalInfos.numberAuditDays"
                       ng-if="!modified" disabled>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Durée d'audit sur site (h)</label>
                <input type="text" class="form-control"
                       placeholder="Durée d'audit sur site (h)"
                       ng-model="generalInfos.auditSiteDuration" ng-if="modified">
                <input type="text" class="form-control"
                       placeholder="Durée d'audit sur site (h)"
                       ng-model="generalInfos.auditSiteDuration" ng-if="!modified"
                       disabled>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Périmètre de l’audit</label>
                <input type="text" class="form-control"
                       placeholder="Périmètre de l’audit"
                       ng-model="generalInfos.auditScope" ng-if="modified">
                <input type="text" class="form-control"
                       placeholder="Périmètre de l’audit"
                       ng-model="generalInfos.auditScope" ng-if="!modified"
                       disabled>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Produits et activités exclus du périmètre de certification</label>
                <input type="number" class="form-control"
                       placeholder="Produits et activités exclus du périmètre de certification"
                       ng-model="generalInfos.excludedProductsAndActivities"
                       ng-if="modified">
                <input type="number" class="form-control"
                       placeholder="Produits et activités exclus du périmètre de certification"
                       ng-model="generalInfos.excludedProductsAndActivities"
                       ng-if="!modified" disabled>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Domaine d’application</label>
                <input type="text" class="form-control"
                       placeholder="Domaine d’application"
                       ng-model="generalInfos.applicationDomain" ng-if="modified">
                <input type="text" class="form-control"
                       placeholder="Domaine d’application"
                       ng-model="generalInfos.applicationDomain" ng-if="!modified"
                       disabled>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Processus ou produits externalisés</label>
                <input type="tel" class="form-control" placeholder="Processus ou produits externalisés"
                       ng-model="generalInfos.outsourcedProcessOrProducts"
                       ng-if="modified">
                <input type="tel" class="form-control" placeholder="Processus ou produits externalisés"
                       ng-model="generalInfos.outsourcedProcessOrProducts"
                       ng-if="!modified"
                       disabled>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Exclusions de la norme</label>
                <input type="tel" class="form-control" placeholder="Exclusions de la norme"
                       ng-model="generalInfos.standardExclusion"
                       ng-if="modified">
                <input type="tel" class="form-control" placeholder="Exclusions de la norme"
                       ng-model="generalInfos.standardExclusion"
                       ng-if="!modified"
                       disabled>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Scope IAF 1</label>
                <select class="form-control" ng-if="modified">
                    <option ng-repeat="iafScope1 in generalInfos.iafScopes1">{{iafScope1.scope}}</option>
                </select>
                <select class="form-control" ng-if="!modified" disabled>
                    <option ng-repeat="iafScope1 in generalInfos.iafScopes1">{{iafScope1.scope}}</option>
                </select>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Scope IAF 2</label>
                <select class="form-control" ng-if="modified">
                    <option ng-repeat="iafScope2 in generalInfos.iafScopes2">{{iafScope2.scope}}</option>
                </select>
                <select class="form-control" ng-if="!modified" disabled>
                    <option ng-repeat="iafScope2 in generalInfos.iafScopes2">{{iafScope2.scope}}</option>
                </select>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Scope IAF 3</label>
                <select class="form-control" ng-if="modified">
                    <option ng-repeat="iafScope3 in generalInfos.iafScopes3">{{iafScope3.scope}}</option>
                </select>
                <select class="form-control" ng-if="!modified" disabled>
                    <option ng-repeat="iafScope3 in generalInfos.iafScopes3">{{iafScope3.scope}}</option>
                </select>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <input type="button" value="Modifier" class="btn btn-dark" ng-click="modif()"
                       ng-if="!modified">
                <button class="btn btn-success" ng-click="updateGeneralInfos()" ng-if="modified">Sauvegarder</button>
                <button class="btn btn-danger" ng-click="cancel()" ng-if="modified">Annuler</button>
            </div>
        </div>
    </uib-tab>
    <uib-tab index="1" heading="{{tabs[1].name}}" disable="tabs[1].disabled">
        <div class="form-row">
            <div class="col-md-12 mb-3">
                <label>Responsable d'audit</label>
                <input type="text" class="form-control"
                       placeholder="Responsable d'audit"
                       ng-model="auditPlan.auditManager"
                       ng-if="modified">
                <input type="text" class="form-control"
                       placeholder="Responsable d'audit"
                       ng-model="auditPlan.auditManager"
                       ng-if="!modified" disabled>
            </div>
        </div>
        <label>Auditeur(s)</label>
        <div class="form-row" ng-repeat="auditor in auditPlan.auditors">
            <div class="col-md-1 mb-3">
                <a ng-click="delRow(auditPlan.auditors, $index)"
                   ng-if="modified && auditPlan.auditors.length > 1">
                    <ng-md-icon icon="remove" style="fill: #c60000"></ng-md-icon>
                </a>
            </div>
            <div class="col-md-11 mb-3">
                <input type="text" class="form-control"
                       placeholder="Nom"
                       ng-model="auditor.name"
                       ng-if="modified">
                <input type="text" class="form-control"
                       placeholder="Nom"
                       ng-model="auditor.name"
                       ng-if="!modified" disabled>
            </div>

        </div>
        <div class="form-row">
            <div class="col-md-1 mb-3">
                <a ng-click="addAuditorRow()"
                   ng-if="modified">
                    <ng-md-icon icon="add" style="fill: #2f6ac6"></ng-md-icon>
                </a>
            </div>
        </div>
        <table class="table table-striped">
            <thead>
            <tr>
                <th ng-if="modified"></th>
                <th scope="col">Début</th>
                <th scope="col">Fin</th>
                <th scope="col">Lieu</th>
                <th scope="col">Personnel audité</th>
                <th scope="col">Services et processus audités</th>
                <th scope="col">Chapitre norme</th>
                <th scope="col">Chapitre norme</th>
                <th scope="col">Chapitre norme</th>
                <th scope="col">Auditeur</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="plan in auditPlan.plans" ng-if="!modified">
                <td>{{plan.startDate}}</td>
                <td>{{plan.endDate}}</td>
                <td>{{plan.place}}</td>
                <td>{{plan.auditedStaff}}</td>
                <td>{{plan.auditedServicesAndProccesses}}</td>
                <td>{{plan.standardChapter1}}</td>
                <td>{{plan.standardChapter2}}</td>
                <td>{{plan.standardChapter3}}</td>
                <td>{{plan.auditor}}</td>
            </tr>
            <tr ng-repeat="plan in auditPlan.plans" ng-if="modified">
                <td><a class="a-remove" ng-click="delRow(auditPlan.plans, $index)">
                    <ng-md-icon icon="remove" style="fill: #c60000"></ng-md-icon>
                </a></td>
                <td><input type="datetime-local" class="form-control" ng-model="plan.startDate"></td>
                <td><input type="datetime-local" class="form-control" ng-model="plan.endDate"></td>
                <td><input type="text" class="form-control" ng-model="plan.place"></td>
                <td><input type="text" class="form-control" ng-model="plan.auditedStaff"></td>
                <td><input type="text" class="form-control" ng-model="plan.auditedServicesAndProccesses"></td>
                <td><input type="text" class="form-control" ng-model="plan.standardChapter1"></td>
                <td><input type="text" class="form-control" ng-model="plan.standardChapter2"></td>
                <td><input type="text" class="form-control" ng-model="plan.standardChapter3"></td>
                <td><input type="text" class="form-control" ng-model="plan.auditor"></td>
            </tr>
            <tr ng-if="modified">
                <td><a ng-click="addPlanRow()">
                    <ng-md-icon icon="add" style="fill: #2f6ac6"></ng-md-icon>
                </a></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            </tbody>
        </table>

        <div class="form-row">
            <div class="col-md-12 mb-3">
                <input type="button" value="Modifier" class="btn btn-dark" ng-click="modif()"
                       ng-if="!modified">
                <button class="btn btn-success" ng-click="updateAuditPlan()" ng-if="modified">Sauvegarder</button>
                <button class="btn btn-danger" ng-click="cancel()" ng-if="modified">Annuler</button>
            </div>
        </div>
    </uib-tab>
    <uib-tab index="2" heading="{{tabs[2].name}}" disable="tabs[2].disabled">

    </uib-tab>
    <uib-tab index="3" heading="{{tabs[3].name}}" disable="tabs[3].disabled">

    </uib-tab>
    <uib-tab index="4" heading="{{tabs[4].name}}" disable="tabs[4].disabled">

    </uib-tab>
    <uib-tab index="5" heading="{{tabs[5].name}}" disable="tabs[5].disabled">

    </uib-tab>
    <uib-tab index="6" heading="{{tabs[6].name}}" disable="tabs[6].disabled">

    </uib-tab>
    <uib-tab index="7" heading="{{tabs[7].name}}" disable="tabs[7].disabled">

    </uib-tab>
    <uib-tab index="8" heading="{{tabs[8].name}}" disable="tabs[8].disabled">

    </uib-tab>
</uib-tabset>
